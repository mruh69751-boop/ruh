<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Mission Dashboard</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Sans', sans-serif;
            background: linear-gradient(135deg, #232526 0%, #414345 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        .container { max-width: 800px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 30px; color: white; }
        h1 { font-size: 24px; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }
        
        .status-card {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            color: #eee;
            border: 1px solid rgba(255,255,255,0.2);
            text-align: center;
        }

        .update-btn {
            background: linear-gradient(135deg, #00c6ff 0%, #0072ff 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 16px;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            font-weight: bold;
            transition: transform 0.2s;
        }
        .update-btn:active { transform: scale(0.95); }

        .section {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 25px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        .section h2 {
            color: #0072ff;
            font-size: 18px;
            margin-bottom: 15px;
            border-left: 5px solid #0072ff;
            padding-left: 12px;
        }

        .task-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid #e9ecef;
        }
        .task-main { flex: 1; }
        .task-title { font-weight: bold; font-size: 15px; margin-bottom: 5px; color: #222; }
        .task-desc { font-size: 13px; color: #666; line-height: 1.4; }
        
        .tag {
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 4px;
            margin-right: 5px;
            font-weight: bold;
        }
        .tag-owner { background: #e2e3e5; color: #383d41; }
        .tag-type-med { background: #f8d7da; color: #721c24; }
        .tag-type-adm { background: #d1ecf1; color: #0c5460; }
        .tag-type-edu { background: #fff3cd; color: #856404; }

        @media (max-width: 600px) {
            .task-item { flex-direction: column; align-items: flex-start; }
            .task-meta { margin-top: 10px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üõ°Ô∏è Family Task Aggregator</h1>
            <div class="status-card" id="childStatus">Ë®àÁÆó‰∏≠...</div>
            <button class="update-btn" onclick="updateDashboard()">
                ÁèæÂú®„ÅÆ„Çø„Çπ„ÇØ„ÇíÊäΩÂá∫
            </button>
        </header>

        <div id="dashboardContent">
            </div>
    </div>

    <script>
        const BIRTH_DATE = new Date('2024-04-01');
        const ENTRANCE_DATE = new Date('2028-04-01');

        function getAge(today) {
            let years = today.getFullYear() - BIRTH_DATE.getFullYear();
            let months = today.getMonth() - BIRTH_DATE.getMonth();
            if (months < 0) { years--; months += 12; }
            return { years, months, totalMonths: years * 12 + months };
        }

        function updateDashboard() {
            const today = new Date();
            const age = getAge(today);
            const content = document.getElementById('dashboardContent');
            
            // „Çπ„ÉÜ„Éº„Çø„ÇπË°®Á§∫
            document.getElementById('childStatus').innerHTML = 
                `„ÅäÂ≠êÊßò: <strong>${age.years}Ê≠≥ ${age.months}„É∂Êúà</strong><br>` +
                `<small>ÂπºÁ®öÂúíÂÖ•ÂúíÔºà2028/04Ôºâ„Åæ„Åß „ÅÇ„Å® ${Math.ceil((ENTRANCE_DATE - today)/(1000*60*60*24*30.4))}„É∂Êúà</small>`;

            content.innerHTML = '';

            // „Ç´„ÉÜ„Ç¥„É™Âà•„É≠„Ç∏„ÉÉ„ÇØ
            const categories = [
                { title: "üè• ÂåªÁôÇ„Éª‰∫àÈò≤Êé•Á®Æ", tasks: generateMedicalTasks(age) },
                { title: "‚öñÔ∏è Ë°åÊîøÊâãÁ∂ö„Åç„ÉªÂÅ•Ë®∫", tasks: generateAdminTasks(age) },
                { title: "üè´ ÂπºÁ®öÂúíÂÖ•ÂúíÊ∫ñÂÇô (2028Âπ¥4ÊúàÁµÑ)", tasks: generateEduTasks(today) }
            ];

            categories.forEach(cat => {
                if (cat.tasks.length > 0) {
                    let sectionHtml = `<div class="section"><h2>${cat.title}</h2>`;
                    cat.tasks.forEach(task => {
                        sectionHtml += `
                            <div class="task-item">
                                <div class="task-main">
                                    <div class="task-title">
                                        <span class="tag tag-owner">${task.owner}</span>${task.title}
                                    </div>
                                    <div class="task-desc">${task.desc}</div>
                                </div>
                                <div class="task-meta">
                                    <span class="tag ${task.typeClass}">${task.type}</span>
                                </div>
                            </div>`;
                    });
                    sectionHtml += `</div>`;
                    content.innerHTML += sectionHtml;
                }
            });
        }

        function generateMedicalTasks(age) {
            const tasks = [];
            // Êó•Êú¨ËÑ≥ÁÇé1ÊúüËøΩÂä† (Ê¶Ç„Å≠2Ê≠≥Âçä„Äú)
            if (age.totalMonths >= 24 && age.totalMonths <= 36) {
                tasks.push({
                    owner: "Â¶ª‰∏ªÂ∞é", title: "Êó•Êú¨ËÑ≥ÁÇé Á¨¨1ÊúüËøΩÂä†Êé•Á®Æ",
                    desc: "1Êúü2ÂõûÂÆå‰∫Ü„Åã„ÇâÊ¶Ç„Å≠1Âπ¥Âæå„ÅåÊé®Â•®„ÄÇÊØçÂ≠êÊâãÂ∏≥„ÅÆË®òÈå≤„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
                    type: "‰∫àÈò≤Êé•Á®Æ", typeClass: "tag-type-med"
                });
            }
            tasks.push({
                owner: "Â§´(ÈÄ±Êú´)", title: "ÂÆöÊúüÊ≠ØÁßëÊ§úË®∫„Éª„Éï„ÉÉÁ¥†Â°óÂ∏É",
                desc: "‰π≥Ê≠Ø„ÅåÁîü„ÅàÊèÉ„ÅÜÊôÇÊúü„Åß„Åô„ÄÇËô´Ê≠Ø‰∫àÈò≤„ÅÆ„Åü„ÇÅ3„Äú4„É∂Êúà„Å´‰∏ÄÂ∫¶„ÅÆÂèóË®∫„ÇíÊé®Â•®„ÄÇ",
                type: "‰ªªÊÑè", typeClass: "tag-type-med"
            });
            return tasks;
        }

        function generateAdminTasks(age) {
            const tasks = [];
            if (age.years === 2) {
                tasks.push({
                    owner: "Â¶ª‰∏ªÂ∞é", title: "2Ê≠≥ÂÖêÊ≠ØÁßëÂÅ•Ë®∫ (Ëá™Ê≤ª‰Ωì)",
                    desc: "„Åä‰Ωè„Åæ„ÅÑ„ÅÆËá™Ê≤ª‰Ωì„Åã„ÇâÊ°àÂÜÖ„ÅåÂ±ä„Åè„ÅØ„Åö„Åß„Åô„ÄÇÊó•Á®ã„ÅÆÁ¢∫Ë™ç„Çí„ÄÇ",
                    type: "Ë°åÊîøÂÅ•Ë®∫", typeClass: "tag-type-adm"
                });
            }
            if (age.years === 3) {
                tasks.push({
                    owner: "‰∏°Ë¶™", title: "3Ê≠≥ÂÖêÂÅ•Â∫∑Ë®∫Êüª",
                    desc: "Ë¶ñÂäõ„ÉªËÅ¥Âäõ„ÉªÂ∞øÊ§úÊüª„Å™„Å©È†ÖÁõÆ„ÅåÂ¢ó„Åà„Åæ„Åô„ÄÇ‰∫ãÂâç„Ç¢„É≥„Ç±„Éº„Éà„ÅÆË®òÂÖ•„ÅåÂøÖË¶Å„Åß„Åô„ÄÇ",
                    type: "ÊúÄÈáçË¶Å", typeClass: "tag-type-adm"
                });
            }
            return tasks;
        }

        function generateEduTasks(today) {
            const tasks = [];
            const year = today.getFullYear();
            
            if (year === 2026) {
                tasks.push({
                    owner: "Â§´(„É™„Çµ„Éº„ÉÅ)", title: "ËøëÈö£ÂπºÁ®öÂúí„ÅÆ„É™„Çπ„Éà„Ç¢„ÉÉ„Éó",
                    desc: "„Äå3Âπ¥‰øùËÇ≤„Äç„ÇíÂâçÊèê„Å´„ÄÅÈÄöÂúíÁØÑÂõ≤ÂÜÖ„ÅÆÂúí„ÅÆÊïôËÇ≤ÊñπÈáù„ÇÑÂª∂Èï∑‰øùËÇ≤ÊôÇÈñì„ÇíË™øÊüª„ÄÇ",
                    type: "Ë™øÊüª", typeClass: "tag-type-edu"
                });
            } else if (year === 2027) {
                tasks.push({
                    owner: "‰∏°Ë¶™", title: "ÂπºÁ®öÂúíË™¨Êòé‰ºö„ÉªË¶ãÂ≠¶‰ºöÂèÇÂä†",
                    desc: "6Êúà„Äú9Êúà„Å´„Åã„Åë„Å¶ÈñãÂÇ¨„ÄÇÂÆüÈöõ„ÅÆÈõ∞Âõ≤Ê∞ó„ÇíÈáçË¶ñ„ÄÇÈ°òÊõ∏ÈÖçÂ∏É„ÅØ10Êúà15Êó•È†É„ÄÇ ",
                    type: "Ë°åÂãï", typeClass: "tag-type-edu"
                });
                tasks.push({
                    owner: "Â§´(ÊúâÁµ¶Ë™øÊï¥)", title: "È°òÊõ∏ÊèêÂá∫„ÉªÈù¢Êé•Ê∫ñÂÇô",
                    desc: "11Êúà1Êó•„ÅåÂ±±Â†¥„Åß„Åô„ÄÇ‰ªï‰∫ã„ÅÆ„Çπ„Ç±„Ç∏„É•„Éº„É´„Çí‰ªä„ÅÆ„ÅÜ„Å°„Å´Á¢∫‰øù„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
                    type: "È°òÊõ∏", typeClass: "tag-type-edu"
                });
            }
            return tasks;
        }

        // ÂàùÊúüË°®Á§∫
        updateDashboard();
    </script>
</body>
</html>